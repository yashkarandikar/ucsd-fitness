% THIS IS SIGPROC-SP.TEX - VERSION 3.1
% WORKS WITH V3.2SP OF ACM_PROC_ARTICLE-SP.CLS
% APRIL 2009
%
% It is an example file showing how to use the 'acm_proc_article-sp.cls' V3.2SP
% LaTeX2e document class file for Conference Proceedings submissions.
% ----------------------------------------------------------------------------------------------------------------
% This .tex file (and associated .cls V3.2SP) *DOES NOT* produce:
%       1) The Permission Statement
%       2) The Conference (location) Info information
%       3) The Copyright Line with ACM data
%       4) Page numbering
% 
\documentclass{acm_proc_article-sp}
\usepackage{comment}
\usepackage{url}
\usepackage{float}
\usepackage{needspace}

\begin{document}

\title{Modeling Temporal Evolution in the Endomondo Fitness Data Set}
%
\numberofauthors{1} % section.
%
\author{
\alignauthor
Yashodhan Hemant Karandikar\\
       \email{ykarandi@ucsd.edu}
}

\maketitle
\begin{abstract}
The goal of this project is to model temporal evolution of runners' capacity across workouts as well as within each workout. We study this temporal evolution over 2 predictive tasks - prediction of duration of the next workout given previous workouts and prediction of average and instantaneous heart-rates. We show that accounting for temporal evolution improves results on these predictive tasks.
\end{abstract}

\section{Introduction}
People work out with the goal of becoming fitter. Regularly working out enables a person to take on more challenging work outs. For example, a runner training for long distance running can gradually attempt runs of longer durations. Thus, the running capacity or the fitness level of the person increases gradually with practice. Modeling this fitness level can be useful in order to be able to predict the duration of the next workout that the runner attempts. Such a prediction can be useful both as a goal and as a guide to the runner while planning the run.

Alternatively, runners often monitor their heart-rate while running and set goals of keeping the heart-rate below or above a certain value, either for improving their fitness level or for their own safety. The heart-rate at future instants in the run depends on how tired the runner is currently, among other factors. Further, this relationship between the heart-rate and how tired the runner is, varies from one runner to another. For example, an experienced runner might experience only a slight increase in heart-rate as he or she is more tired, while the heart-rate of an amateur runner might shoot up soon after the run starts.

The examples above highlight the temporal evolution of a runner's capacity, both across workouts and within each workout. We attempt to model both these forms of temporal evolution in this work.

\section{Predictive Tasks}
In order to study temporal evolution of a runner \emph{across} several workouts, we choose the following 2 predictive tasks as follows:
\begin{enumerate}
\item Given the distance $d_i$ and duration $T_i$ for each workout $i$ among first $n$ workouts of a user $u$ and given the distance $d_{n+1}$ for the $(n+1)$'th workout, predict the duration $T_{n+1}$ of the $(n+1)$'th workout.
\item Given the distance $d_i$ and average heart-rate $H_i$ for each workout $i$ among first $n$ workouts of a user $u$ and given the distance $d_{n+1}$ for the $(n+1)$'th workout, predict the average heart-rate $H_{n+1}$ of the $(n+1)$'th workout.
\end{enumerate}

In order to study temporal evolution of a runner \emph{within} \emph{each} workout, we choose the following 2 predictive tasks as follows:

\begin{enumerate}
\item Given the first $n$ instantaneous heart-rates of a workout, predict the $(n+1)$'th instantaneous heart-rate.
\item Given the instantaneous heart-rates of the first $f$ fraction of a workout, predict the heart-rates of the remaining $1-f$ fraction of the workout. This task is a generalization of the first.
\end{enumerate}

\section{Related Work}
\cite{www13} describes various models which account for temporal evolution of user expertise through online reviews on websites such as Amazon, BeerAdvocate, RateBeer, CellarTracker. 

\section{Endomondo Fitness data set}
\label{expAnalysis}
In this section, we introduce the Endomondo fitness data set. \cite{mldataset}. 

\begin{comment}
\begin{figure}[h]
\centering
\includegraphics[scale=0.4]{plots/rating_vs_age}
\caption{\label{plotRatingVsAge}Average rating for different age groups}
\end{figure}

\begin{figure*}
\centering
\includegraphics[scale=0.4]{plots/rating_vs_occupation}
\caption{\label{plotRatingVsOcc} Average rating for various occupations}
\end{figure*}
\end{comment}

\begin{comment}
\begin{figure*}
\centering
\includegraphics[scale=0.4]{plots/rating_vs_genre}
\caption{\label{plotRatingVsGenre} Average rating for various movie genres}
\end{figure*}
\end{comment}

\section{Baseline Model}
\label{secBaselineModel}
This section describes a baseline model to predict the duration of a workout given the distance.

\section{Temporal Evolution of Users}
\label{secTemporalModelUsers}
This section describes a model that attempts to account for temporal evolution of users across workouts. First, we describe the model and then describe the training algorithm.

\subsection{Model Specification}
In order to account for evolution in the fitness level or capability of a user over time,  we associate a \emph{experience level} or \emph{fitness level} $e$ with each workout $w$. This can be seen as a way of encoding how fit the user is at the time of the workout $w$. The value $e$ is an integer in the interval $[0, E)$ where $E$ is the number of experience levels. 

Intuitively, we expect the experience level of a user to either stay the same or increase with each workout. We encode this intuition in the form of a monotonicity constraint on the experience levels of workouts for each user, as given below:

$$\forall u,i,j \;\;\;\;\; t_{ui} \geq t_{uj} \implies e_{ui} \geq e_{uj}$$

Then, given the total distance $d_{ui}$ for the $i$'th workout of user $u$, the predicted duration $T_{ui}'$ of the workout is given by:

$$T_{ui}' = (\alpha_{e_{ui}} + \alpha_{ue_{ui}})(\theta_0 + \theta_1 d_{ui})$$

where $e_{ui}$ is the experience level of the user $u$ at the $i$'th workout. Thus, we have one parameter $\alpha_{ue}$ per user $u$ per experience level $e$. Further, we have an intercept term $\alpha_e$ for every experience level $e$, common to all users. The terms $\theta_0$ and $\theta_1$ are global to all users and experience levels. Thus, given $U$ users and $E$ experience levels, we have a total of $UE + E + 2$ parameters.

Note that setting $E = 1$ reduces the model to the baseline model described in section \ref{secBaselineModel}.

\subsection{Training Algorithm}


\section{Temporal Evolution of Workouts}
\label{secTemporalModelWorkouts}

%\needspace{2\baselineskip}
\section{Results}

\begin{table*}
\centering
\begin{tabular}{|c|c|c|c|c|c|c|} \hline
& \# Examples & Variance & Linear Predictor & Collaborative Filtering & Latent Factor & Mahout ALS \\ \hline
Training & 640135 & 0.049970 & 0.029748 {\bf(0.404688)} & 0.023681 {\bf(0.526092)} & 0.020354 {\bf(0.592680)} & {\bf(0.586866)} \\ \hline
Validation & 160033 & 0.049826 & 0.033429 {\bf(0.329085)}  & 0.033488 {\bf(0.327886)} & 0.030545 {\bf(0.386954)} & {\bf(0.392062)} \\ \hline
Test & 200041 & 0.049818 & 0.033776 {\bf(0.322010)} & 0.033779 {\bf(0.321948)} & 0.030765 {\bf(0.382451)} & {\bf(0.388799)}\\ \hline
\end{tabular}
\caption{MSE and $R^2$ obtained using the 3 predictors discussed in this work and Mahout's ALS recommender on the MovieLens dataset. Values in boldface/brackets are $R^2$ values.}
\label{tableResults}
\end{table*}
% end the environment with {table*}, NOTE not {table}!

\section{Conclusion and Future Work}

\bibliographystyle{abbrv}
\bibliography{references.bib}

\end{document}
